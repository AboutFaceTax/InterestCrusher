<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About-Face Tax Calculator – InterestCrusher</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React & ReactDOM -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js" crossorigin></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js" crossorigin></script>

  <!-- PropTypes (for Recharts) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>

  <!-- Recharts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.12.7/Recharts.min.js"></script>

  <!-- Babel for JSX -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

  <style>
    body {
      background-color: #c5afa0;
    }
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    ::-webkit-scrollbar-thumb {
      background: #8b4513;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #5d4037;
    }
  </style>
</head>
<body class="antialiased text-[#3E2723]">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo } = React;
    const RechartsObj = window.Recharts || window.Recharts?.default || {};
    const {
      BarChart,
      Bar,
      XAxis,
      YAxis,
      CartesianGrid,
      Tooltip,
      Legend,
      ResponsiveContainer,
    } = RechartsObj;

    const Card = ({ children, className = "" }) => (
      <div className={"bg-white rounded-xl shadow-lg border border-[#8B4513]/30 " + className}>
        {children}
      </div>
    );

    const Input = ({ label, prefix, suffix, value, onChange, step = "0.01" }) => (
      <div className="mb-4">
        <label className="block text-xs font-bold uppercase tracking-wide mb-1 text-[#5D4037]">
          {label}
        </label>
        <div className="relative">
          {prefix && (
            <span className="absolute inset-y-0 left-0 pl-3 flex items-center font-bold text-[#8B4513]">
              {prefix}
            </span>
          )}
          <input
            type="number"
            step={step}
            value={value}
            onChange={(e) => onChange(e.target.value)}
            className={
              "block w-full border-2 rounded-lg py-2.5 text-lg font-bold bg-white text-[#3E2723] " +
              "focus:ring-[#DAA520] focus:border-[#DAA520] " +
              (prefix ? "pl-8" : "pl-3") +
              (suffix ? " pr-10" : " pr-3")
            }
          />
          {suffix && (
            <span className="absolute inset-y-0 right-0 pr-3 flex items-center font-bold text-[#8B4513]">
              {suffix}
            </span>
          )}
        </div>
      </div>
    );

    const Stat = ({ label, value, highlight }) => (
      <div
        className={
          "p-4 rounded-lg border-2 " +
          (highlight
            ? "bg-[#F5DEB3] border-[#DAA520]"
            : "bg-gray-50 border-gray-200")
        }
      >
        <div className="text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-1">
          {label}
        </div>
        <div
          className={
            "text-2xl font-black " +
            (highlight ? "text-[#8B4513]" : "text-gray-700")
          }
        >
          {value}
        </div>
      </div>
    );

    const formatMoney = (val) =>
      new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
      }).format(val || 0);

    const formatMonths = (m) => {
      const y = Math.floor(m / 12);
      const r = m % 12;
      if (y <= 0) return r + " mos";
      return `${y} yr${y > 1 ? "s" : ""}, ${r} mos`;
    };

    function calcLoanStandard(type, principal, rate, termYears, minPayment) {
      const monthlyRate = rate / 100 / 12;
      if (type === "card") {
        const payment = minPayment;
        let balance = principal;
        let months = 0;
        let totalInterest = 0;

        if (payment <= balance * monthlyRate) {
          return { error: "Payment too low to cover interest." };
        }

        while (balance > 0.01 && months < 1200) {
          const interest = balance * monthlyRate;
          let pay = payment;
          if (balance + interest < pay) pay = balance + interest;
          totalInterest += interest;
          balance -= pay - interest;
          months++;
        }
        return { payment, months, totalInterest };
      } else {
        const n = termYears * 12;
        if (monthlyRate === 0) {
          const payment = principal / n;
          return { payment, months: n, totalInterest: 0 };
        }
        const payment =
          (principal * monthlyRate * Math.pow(1 + monthlyRate, n)) /
          (Math.pow(1 + monthlyRate, n) - 1);

        let balance = principal;
        let months = 0;
        let totalInterest = 0;

        while (balance > 0.01 && months < n + 2) {
          const interest = balance * monthlyRate;
          let pay = payment;
          if (balance + interest < pay) pay = balance + interest;
          totalInterest += interest;
          balance -= pay - interest;
          months++;
        }
        return { payment, months, totalInterest };
      }
    }

    function calcWithExtra(principal, rate, basePayment, extra) {
      const monthlyRate = rate / 100 / 12;
      let balance = principal;
      let months = 0;
      let totalInterest = 0;

      if (basePayment + extra <= balance * monthlyRate) {
        return { error: "Combined payment too low to cover interest." };
      }

      while (balance > 0.01 && months < 1200) {
        const interest = balance * monthlyRate;
        let pay = basePayment + extra;
        if (balance + interest < pay) pay = balance + interest;
        totalInterest += interest;
        balance -= pay - interest;
        months++;
      }
      return { months, totalInterest };
    }

    function App() {
      const [tab, setTab] = useState("mortgage");

      const [amount, setAmount] = useState(300000);
      const [rate, setRate] = useState(6.5);
      const [years, setYears] = useState(30);
      const [cardPayment, setCardPayment] = useState(150);
      const [extra, setExtra] = useState(100);

      const principal = parseFloat(amount) || 0;
      const r = parseFloat(rate) || 0;
      const y = parseFloat(years) || 0;
      const extraPay = parseFloat(extra) || 0;
      const cardMin = parseFloat(cardPayment) || 0;

      const startDate = useMemo(() => new Date(), []);

      const result = useMemo(() => {
        if (!principal || !r || (tab !== "card" && !y)) {
          return { error: "Enter loan details to begin." };
        }

        const standard = calcLoanStandard(
          tab,
          principal,
          r,
          y,
          cardMin
        );
        if (standard.error) return { error: standard.error };

        const withExtra = calcWithExtra(
          principal,
          r,
          standard.payment,
          extraPay
        );
        if (withExtra.error) return { error: withExtra.error };

        const interestSaved =
          standard.totalInterest - withExtra.totalInterest;
        const monthsSaved = standard.months - withExtra.months;

        const payoff = (months) => {
          const d = new Date(startDate.getTime());
          d.setMonth(d.getMonth() + months);
          return d.toLocaleDateString("en-US", {
            month: "long",
            year: "numeric",
          });
        };

        return {
          standard,
          withExtra,
          interestSaved,
          monthsSaved,
          payoffStandard: payoff(standard.months),
          payoffExtra: payoff(withExtra.months),
        };
      }, [tab, principal, r, y, cardMin, extraPay, startDate]);

      const chartData =
        result && !result.error
          ? [
              {
                name: "Standard",
                Principal: principal,
                Interest: result.standard.totalInterest,
              },
              {
                name: "With Plan",
                Principal: principal,
                Interest: result.withExtra.totalInterest,
              },
            ]
          : [];

      return (
        <div className="min-h-screen bg-[#C5AFA0] pb-10">
          {/* Header */}
          <header className="bg-[#2C1A10] text-white py-6 border-b-4 border-[#DAA520]">
            <div className="max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center">
              <div className="flex items-center space-x-4 mb-4 md:mb-0">
                <div>
                  <h1 className="text-3xl font-serif font-bold tracking-wide text-[#FFD700]">
                    ABOUT-FACE
                  </h1>
                  <p className="text-xs uppercase tracking-[0.3em] text-[#F5DEB3]">
                    Tax Group
                  </p>
                </div>
                <div className="hidden md:block h-10 w-px bg-[#DAA520] mx-4" />
                <div>
                  <h2 className="text-lg font-bold text-[#DEB887]">
                    InterestCrusher
                  </h2>
                  <p className="text-xs text-gray-400">
                    Turn extra payments into interest savings.
                  </p>
                </div>
              </div>

              <div className="flex bg-[#3E2723] p-1 rounded-lg border border-[#5D4037]">
                {[
                  { id: "mortgage", label: "Mortgage" },
                  { id: "auto", label: "Auto" },
                  { id: "card", label: "Credit" },
                ].map((t) => (
                  <button
                    key={t.id}
                    onClick={() => {
                      setTab(t.id);
                      if (t.id === "mortgage") {
                        setAmount(300000);
                        setRate(6.5);
                        setYears(30);
                      }
                      if (t.id === "auto") {
                        setAmount(35000);
                        setRate(7.9);
                        setYears(5);
                      }
                      if (t.id === "card") {
                        setAmount(5000);
                        setRate(24.99);
                        setCardPayment(150);
                      }
                    }}
                    className={
                      "px-4 py-2 rounded-md text-sm font-bold transition-all " +
                      (tab === t.id
                        ? "bg-[#DAA520] text-[#2C1A10]"
                        : "text-[#DEB887] hover:bg-[#5D4037]")
                    }
                  >
                    {t.label}
                  </button>
                ))}
              </div>
            </div>
          </header>

          {/* Main */}
          <main className="max-w-6xl mx-auto px-4 mt-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
            {/* Inputs */}
            <div className="lg:col-span-4">
              <Card className="p-6">
                <h3 className="text-lg font-bold text-[#3E2723] mb-4 uppercase tracking-wide">
                  Loan Details
                </h3>

                <Input
                  label={
                    tab === "card" ? "Current Balance" : "Loan Amount"
                  }
                  prefix="$"
                  value={amount}
                  onChange={setAmount}
                />
                <div className="grid grid-cols-2 gap-4">
                  <Input
                    label="Interest Rate"
                    suffix="%"
                    value={rate}
                    onChange={setRate}
                  />
                  {tab !== "card" && (
                    <Input
                      label="Term (Years)"
                      step="1"
                      value={years}
                      onChange={setYears}
                    />
                  )}
                </div>

                {tab === "card" && (
                  <Input
                    label="Monthly Payment"
                    prefix="$"
                    value={cardPayment}
                    onChange={setCardPayment}
                  />
                )}

                <div className="mt-6 pt-4 border-t border-gray-200">
                  <h4 className="text-xs font-bold uppercase tracking-widest text-[#5D4037] mb-2">
                    Interest Crushing Plan
                  </h4>
                  <Input
                    label="Extra Monthly Payment"
                    prefix="$"
                    value={extra}
                    onChange={setExtra}
                  />
                  <p className="text-[11px] text-gray-600 italic">
                    This is the extra you commit to send with every
                    payment – tax refunds, side-gig cash, or budget
                    trims can live here.
                  </p>
                </div>
              </Card>
            </div>

            {/* Results */}
            <div className="lg:col-span-8 space-y-6">
              {result.error ? (
                <Card className="p-6 bg-red-50 border-red-400">
                  <p className="text-red-800 font-bold text-sm">
                    {result.error}
                  </p>
                </Card>
              ) : (
                <>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <Card className="p-6 border-[#DAA520]">
                      <div className="text-[11px] font-bold uppercase tracking-widest text-[#8B4513] mb-2">
                        Total Interest Saved
                      </div>
                      <div className="text-4xl md:text-5xl font-serif font-bold text-[#3E2723] mb-1">
                        {formatMoney(result.interestSaved)}
                      </div>
                      <p className="text-xs text-[#8B4513] font-medium">
                        Money that stays in your pocket instead of the
                        bank’s.
                      </p>
                    </Card>

                    <Card className="p-6 border-[#DAA520]">
                      <div className="text-[11px] font-bold uppercase tracking-widest text-[#8B4513] mb-2">
                        Debt-Free Date with Plan
                      </div>
                      <div className="text-3xl md:text-4xl font-serif font-bold text-[#3E2723] mb-1">
                        {result.payoffExtra}
                      </div>
                      <p className="text-xs text-gray-600 font-medium">
                        About{" "}
                        <span className="font-bold text-[#DAA520]">
                          {formatMonths(result.monthsSaved)}
                        </span>{" "}
                        sooner than the standard path.
                      </p>
                    </Card>
                  </div>

                  <Card className="p-6">
                    <div className="flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-4">
                      <h3 className="text-lg font-bold text-[#3E2723]">
                        Interest vs Principal – Standard vs Plan
                      </h3>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div className="h-64">
                        {BarChart ? (
                          <ResponsiveContainer width="100%" height="100%">
                            <BarChart
                              data={chartData}
                              layout="vertical"
                              margin={{ top: 10, right: 20, left: 40, bottom: 5 }}
                            >
                              <CartesianGrid
                                strokeDasharray="3 3"
                                horizontal={false}
                              />
                              <XAxis type="number" hide />
                              <YAxis
                                type="category"
                                dataKey="name"
                                tick={{ fontSize: 12, fontWeight: "bold" }}
                                width={80}
                              />
                              <Tooltip />
                              <Legend />
                              <Bar
                                dataKey="Principal"
                                stackId="a"
                                fill="#3E2723"
                                barSize={26}
                              />
                              <Bar
                                dataKey="Interest"
                                stackId="a"
                                fill="#DAA520"
                                barSize={26}
                                radius={[0, 4, 4, 0]}
                              />
                            </BarChart>
                          </ResponsiveContainer>
                        ) : (
                          <div className="h-full flex items-center justify-center text-xs text-gray-500 border border-dashed border-gray-300 rounded-lg p-4">
                            Chart library could not load. Check your internet
                            connection or CDN blocking settings.
                          </div>
                        )}
                      </div>

                      <div className="grid grid-cols-2 gap-4">
                        <Stat
                          label="Standard Payment (P&I)"
                          value={formatMoney(result.standard.payment)}
                        />
                        <Stat
                          label="Plan Payment (P&I + Extra)"
                          value={formatMoney(
                            result.standard.payment + extraPay
                          )}
                          highlight
                        />
                        <Stat
                          label="Standard Interest"
                          value={formatMoney(result.standard.totalInterest)}
                        />
                        <Stat
                          label="Plan Interest"
                          value={formatMoney(result.withExtra.totalInterest)}
                          highlight
                        />
                        <Stat
                          label="Standard Payoff"
                          value={result.payoffStandard}
                        />
                        <Stat
                          label="Plan Payoff"
                          value={result.payoffExtra}
                          highlight
                        />
                      </div>
                    </div>
                  </Card>
                </>
              )}
            </div>
          </main>

          <footer className="max-w-6xl mx-auto px-4 mt-8 text-center text-xs text-[#5D4037] pb-6">
            <p className="font-bold text-[#3E2723]">
              About-Face Tax Group | InterestCrusher Strategy Tool
            </p>
            <p className="mt-2 opacity-75">
              Educational tool only. Actual results depend on your exact
              lender terms, timing, and behavior. This is not a lending
              offer or individualized tax or financial advice.
            </p>
          </footer>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
